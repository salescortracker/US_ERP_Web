<ngx-spinner></ngx-spinner>
<div *ngIf='opencheck'>
<h3>Insurance Details</h3>
<table style="width:60%" >
    <tr>
        <td style="width: 35%;" align="right">Insurance Provider</td>
        <td style="width: 65%;">
        <select class="form-control" [(ngModel)]='supid'>
            <option value="0">--Select Supplier--</option>
            <option *ngFor='let sup of suppliers' value="{{sup.recordId}}">
                {{sup.partyName}}
            </option>
        </select>
        </td>
    </tr>
        
<tr>
    <td style="width: 35%;" align="right">Insurance Amount</td>
    <td style="width: 65%;">
    <input type="number" class="form-control" [(ngModel)]='amt' >
    </td>
</tr>
       
<tr>
    <td style="width: 35%;" align="right">Insurance From</td>
    <td style="width: 65%;">
        <input type="date" class="form-control" [value]="fromdate | date:'yyyy-MM-dd'" (input)="fromdate=parseDate($event.target.value)"> 

    </td>
</tr>
<tr>
    <td style="width: 35%;" align="right">Insurance To</td>
    <td style="width: 65%;">
        <input type="date" class="form-control" [value]="todate | date:'yyyy-MM-dd'" (input)="todate=parseDate($event.target.value)"> 

    </td>
</tr>
<tr>
    <td style="width: 35%;" align="right">Equipment</td>
    <td style="width: 65%;">
   <table style="width: 100%;">
<tr>
    <td style="width: 80%;">
        <select class="form-control" [(ngModel)]='equipid'>
            <option value="0">--Select Equipment--</option>
            <option *ngFor='let equ of equips' value="{{equ.recordId}}">
                {{equ.equipmentName}}
            </option>
        </select>
    </td>
    <td style="width: 15%;">
    <button type="button" class="btn-sm btn-info" (click)='addEquip()'>Add</button>
    </td>
</tr>
</table>
    </td>
</tr>
  <tr>
      <td style="width: 35%;">
    &nbsp;
    </td>
    <td style="width: 65%;">
         
    <table class="table m-0" style="width: 100%;">
        <thead class="thead-light">
          <tr>
            <th style="width: 4%;">#</th>
           
            <th style="width: 90%;">Equipment</th>
           
              <th style="width: 6%;"></th>
          
          </tr>
        </thead>
        <tbody>
         
          <tr *ngFor='let enq of selequips;let i=index'>
            <th scope="row" style="width: 4%;" >{{i+1}}</th>
             <td style="width: 90%;">{{enq.equipname}}</td>
            
                <td style="width: 6%;"><i   class="ft-trash font-medium-1" (click)='delete(enq)'></i></td>
  
           </tr>
         
        </tbody>
      </table>
        </td>
  </tr>
  

<tr>
    <td style="width: 35%;" align="right">Description</td>
    <td style="width: 65%;">
        <textarea rows="3" class="form-control" [(ngModel)]='descr'>

        </textarea>
     
</tr>
<tr>
    <td colspan="2">
        <button type="button" class="btn-lg btn-primary" (click)='save()'>Save</button>
        <button type="button" class="btn-lg btn-dark" (click)='close()'>Close</button>
    </td>
</tr>

</table>
</div>

<div *ngIf='!opencheck'>

    <h3>
        List of Insurance Details
    </h3>
    
     
    <table style="width: 80%;">
     <tr>
 
      <td align="right" style="width: 40%;">
          <input type="date" class="form-control" [value]="listdate | date:'yyyy-MM-dd'" (input)="listdate=parseDate($event.target.value)"> 
     
      
      </td>
      <td align="left" style="width: 25%;">   <button *ngIf='!opened' type="button" class="btn-lg btn-info mr-1 mb-1" (click)='listAdd()'>Show</button> </td>
 
         <td align="left" style="width: 25%;" *ngIf="addbuttonenable">
             <button type="button" class="btn-lg btn-success mr-1 mb-1" (click)='openNew()' >New</button>
         </td>
       
     </tr>
     </table>
 
 
 
    
    <table class="table m-0" style="width: 100%;">
        <thead class="thead-light">
          <tr>
            <th style="width: 4%;">#</th>
           
            <th style="width: 30%;">Supplier</th>
            <th style="width: 20%;">Insured</th>
            <th style="width: 20%;">From</th>
            <th style="width: 20%;">To</th>
              <th style="width: 6%;"></th>
          
          </tr>
        </thead>
        <tbody>
         
          <tr *ngFor='let enq of prevmains;let i=index'>
            <th scope="row" style="width: 4%;" >{{i+1}}</th>
             <td style="width: 30%;">{{enq.partyName}}</td>
             <td style="width: 20%;">{{enq.insuredAmount | number:'0.2'}}</td>
            <td style="width: 20%;">{{enq.insuredFrom | date:'dd-MMM-yy'}}</td>
           
            <td style="width: 20%;">{{enq.insuredTo | date:'dd-MMM-yy'}}</td>
                <td style="width: 6%;" *ngIf="modifybuttonenable"><i *ngIf='!opened' class="ft-edit font-medium-1"></i></td>
  
           </tr>
         
        </tbody>
      </table>
</div>