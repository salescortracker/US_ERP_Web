
 <ngx-spinner></ngx-spinner>
<div *ngIf='opened'>
<h3> Tax Assigingings </h3>

<table style="width: 70%;">
<tr>
    <td style="width: 30%;">Name</td>
    <td colspan="3"> <input class="form-control" [(ngModel)]='header.TaxName'> </td>

</tr>

<tr><td colspan="4">&nbsp;</td></tr>
<tr>
    <td style="width: 30%;">Tax Code</td>
    <td style="width: 15%;">Tax %</td>
    <td style="width: 40%;">Tax on</td>
    <td style="width: 15%"> &nbsp;</td>
</tr>
<tr>
    <td style="width: 30%;"><select class="form-control" [(ngModel)]='taxcode'> <option value="">--Select--</option>
    <option *ngFor='let tax of taxes' value="{{tax.taxcode}}">{{tax.taxcode}}</option>
    </select> </td>
    <td style="width: 15%;"> <input type="number" class="form-control" [(ngModel)]='taxper'> </td>
    <td style="width: 40%;"> <select class="form-control" [(ngModel)]='taxon'> <option value="">-Select--</option>
       <option value="On Change Amount">On Change Amount</option>
       <option value="On Rack Amount">On Rack Amount</option>
        <option *ngFor='let tax of taxes' value="{{tax.taxcode}}">{{tax.taxcode}}</option>
    </select>  </td>
    <td style="width: 15%"> <button class="btn btn-success" type="button" (click)='addTax()'>Add</button> </td>
</tr>
<tr>
    <td colspan="4">
        <div style="width: 100%;height: 250px;overflow-y: scroll;">
        <table class="table m-0" style="width: 100%;">
            <thead class="thead-light">
              <tr>
                <th>#</th>
                <th>Tax Code</th>
                <th>Tax %</th>
                <th>Tax On</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
             
              <tr *ngFor='let line of lines;let i=index'>
                <th scope="row" >{{i+1}}</th>
                <td>{{line.TaxCode}}</td>
                <td>{{line.Taxper}}</td>
                <td>{{line.TaxOn}}</td>
                <td><i class="ft-trash font-medium-1" (click)='deleteTax(line)'></i></td>
              </tr>
             
            </tbody>
          </table>
        </div>
    </td>
</tr>
<tr>
    <td colspan="4">
        <button class="btn btn-danger" *ngIf='recordId > 0' type="button" (click)='delete()'>Delete</button>
        <button class="btn btn-primary" type="button" (click)='save()'>{{saveStr}}</button>
        <button class="btn btn-dark" type="button" (click)='close()'>Close</button>
    </td>
</tr>
</table>
</div>

<div *ngIf='!opened'>
<table style="width:50%">
<tr>
    <td style="width: 85%;"> <h3>List of Tax Details</h3>
    </td>
    <td style="width: 15%;"> <button class="btn btn-success" type="button" (click)='openNew()'> New </button>  </td>
</tr>
<tr>
    <td colspan="2">
        <table class="table m-0" style="width: 100%;">
            <thead class="thead-light">
              <tr>
                <th>#</th>
                <th>Id</th>
                
                <th></th>
              </tr>
            </thead>
            <tbody>
             
              <tr *ngFor='let tax of taxesList;let i=index'>
                <th scope="row" >{{i+1}}</th>
                <td>{{tax.taxName}}</td>
                 
                <td><i class="ft-edit font-medium-1" (click)='openOld(tax)'></i></td>
              </tr>
             
            </tbody>
          </table>

    </td>
</tr>
</table>


</div>